{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{NavLink}from'react-router-dom';import{Dropdown}from'react-bootstrap';import classNames from'classnames';import{OverlayScrollbarsComponent}from'overlayscrollbars-react';import{MENU_PLACEMENT}from'constants.js';import CsLineIcons from'cs-line-icons/CsLineIcons';import{layoutShowingNavMenu}from'layout/layoutSlice';import{fetchNotifications}from'./notificationSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NotificationsDropdownToggle=/*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function(_ref,ref){var _onClick=_ref.onClick,_ref$expanded=_ref.expanded,expanded=_ref$expanded===void 0?false:_ref$expanded;return/*#__PURE__*/_jsx(\"a\",{ref:ref,href:\"#/\",className:\"notification-button\",\"data-toggle\":\"dropdown\",\"aria-expanded\":expanded,onClick:function onClick(e){e.preventDefault();e.stopPropagation();_onClick(e);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative d-inline-flex\",children:[/*#__PURE__*/_jsx(CsLineIcons,{icon:\"bell\",size:\"18\"}),/*#__PURE__*/_jsx(\"span\",{className:\"position-absolute notification-dot rounded-xl\"})]})});}));var NotificationItem=function NotificationItem(_ref2){var _ref2$img=_ref2.img,img=_ref2$img===void 0?'':_ref2$img,_ref2$link=_ref2.link,link=_ref2$link===void 0?'':_ref2$link,_ref2$detail=_ref2.detail,detail=_ref2$detail===void 0?'':_ref2$detail;return/*#__PURE__*/_jsxs(\"li\",{className:\"mb-3 pb-3 border-bottom border-separator-light d-flex\",children:[/*#__PURE__*/_jsx(\"img\",{src:img,className:\"me-3 sw-4 sh-4 rounded-xl align-self-center\",alt:\"notification\"}),/*#__PURE__*/_jsx(\"div\",{className:\"align-self-center\",children:/*#__PURE__*/_jsx(NavLink,{to:link,activeClassName:\"\",children:detail})})]});};var NotificationsDropdownMenu=/*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function(_ref3,ref){var style=_ref3.style,className=_ref3.className,labeledBy=_ref3.labeledBy,items=_ref3.items;return/*#__PURE__*/_jsx(\"div\",{ref:ref,style:style,className:classNames('wide notification-dropdown scroll-out',className),\"aria-labelledby\":labeledBy,children:/*#__PURE__*/_jsx(OverlayScrollbarsComponent,{options:{scrollbars:{autoHide:'leave',autoHideDelay:600},overflowBehavior:{x:'hidden',y:'scroll'}},className:\"scroll\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled border-last-none\",children:items.map(function(item,itemIndex){return/*#__PURE__*/_jsx(NotificationItem,{detail:item.detail,link:item.link,img:item.img},\"notificationItem.\".concat(itemIndex));})})})});}));NotificationsDropdownMenu.displayName='NotificationsDropdownMenu';var MENU_NAME='Notifications';var Notifications=function Notifications(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.menu;}),placement=_useSelector.placementStatus.view,behaviourHtmlData=_useSelector.behaviourStatus.behaviourHtmlData,attrMobile=_useSelector.attrMobile,attrMenuAnimate=_useSelector.attrMenuAnimate;var _useSelector2=useSelector(function(state){return state.settings;}),color=_useSelector2.color;var _useSelector3=useSelector(function(state){return state.notification;}),items=_useSelector3.items;var _useSelector4=useSelector(function(state){return state.layout;}),showingNavMenu=_useSelector4.showingNavMenu;useEffect(function(){dispatch(fetchNotifications());return function(){};// eslint-disable-next-line\n},[]);var onToggle=function onToggle(status,event){if(event&&event.stopPropagation)event.stopPropagation();else if(event&&event.originalEvent&&event.originalEvent.stopPropagation)event.originalEvent.stopPropagation();dispatch(layoutShowingNavMenu(status?MENU_NAME:''));};useEffect(function(){dispatch(layoutShowingNavMenu(''));// eslint-disable-next-line\n},[attrMenuAnimate,behaviourHtmlData,attrMobile,color]);if(items&&items.length>0){return/*#__PURE__*/_jsxs(Dropdown,{as:\"li\",bsPrefix:\"list-inline-item\",onToggle:onToggle,show:showingNavMenu===MENU_NAME,align:placement===MENU_PLACEMENT.Horizontal?'end':'start',children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{as:NotificationsDropdownToggle}),/*#__PURE__*/_jsx(Dropdown.Menu,{as:NotificationsDropdownMenu,items:items,popperConfig:{modifiers:[{name:'offset',options:{offset:function offset(){if(placement===MENU_PLACEMENT.Horizontal){return[0,7];}if(window.innerWidth<768){return[-168,7];}return[-162,7];}}}]}})]});}return/*#__PURE__*/_jsx(_Fragment,{});};export default/*#__PURE__*/React.memo(Notifications);","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","NavLink","Dropdown","classNames","OverlayScrollbarsComponent","MENU_PLACEMENT","CsLineIcons","layoutShowingNavMenu","fetchNotifications","NotificationsDropdownToggle","memo","forwardRef","ref","onClick","expanded","e","preventDefault","stopPropagation","NotificationItem","img","link","detail","NotificationsDropdownMenu","style","className","labeledBy","items","scrollbars","autoHide","autoHideDelay","overflowBehavior","x","y","map","item","itemIndex","displayName","MENU_NAME","Notifications","dispatch","state","menu","placement","placementStatus","view","behaviourHtmlData","behaviourStatus","attrMobile","attrMenuAnimate","settings","color","notification","layout","showingNavMenu","onToggle","status","event","originalEvent","length","Horizontal","modifiers","name","options","offset","window","innerWidth"],"sources":["/Users/caio/Projects/Samples/front-vawlog/src/layout/nav/notifications/Notifications.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { Dropdown } from 'react-bootstrap';\nimport classNames from 'classnames';\nimport { OverlayScrollbarsComponent } from 'overlayscrollbars-react';\nimport { MENU_PLACEMENT } from 'constants.js';\nimport CsLineIcons from 'cs-line-icons/CsLineIcons';\nimport { layoutShowingNavMenu } from 'layout/layoutSlice';\nimport { fetchNotifications } from './notificationSlice';\n\nconst NotificationsDropdownToggle = React.memo(\n  React.forwardRef(({ onClick, expanded = false }, ref) => (\n    <a\n      ref={ref}\n      href=\"#/\"\n      className=\"notification-button\"\n      data-toggle=\"dropdown\"\n      aria-expanded={expanded}\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        onClick(e);\n      }}\n    >\n      <div className=\"position-relative d-inline-flex\">\n        <CsLineIcons icon=\"bell\" size=\"18\" />\n        <span className=\"position-absolute notification-dot rounded-xl\" />\n      </div>\n    </a>\n  ))\n);\nconst NotificationItem = ({ img = '', link = '', detail = '' }) => (\n  <li className=\"mb-3 pb-3 border-bottom border-separator-light d-flex\">\n    <img src={img} className=\"me-3 sw-4 sh-4 rounded-xl align-self-center\" alt=\"notification\" />\n    <div className=\"align-self-center\">\n      <NavLink to={link} activeClassName=\"\">\n        {detail}\n      </NavLink>\n    </div>\n  </li>\n);\n\nconst NotificationsDropdownMenu = React.memo(\n  React.forwardRef(({ style, className, labeledBy, items }, ref) => {\n    return (\n      <div ref={ref} style={style} className={classNames('wide notification-dropdown scroll-out', className)} aria-labelledby={labeledBy}>\n        <OverlayScrollbarsComponent\n          options={{\n            scrollbars: { autoHide: 'leave', autoHideDelay: 600 },\n            overflowBehavior: { x: 'hidden', y: 'scroll' },\n          }}\n          className=\"scroll\"\n        >\n          <ul className=\"list-unstyled border-last-none\">\n            {items.map((item, itemIndex) => (\n              <NotificationItem key={`notificationItem.${itemIndex}`} detail={item.detail} link={item.link} img={item.img} />\n            ))}\n          </ul>\n        </OverlayScrollbarsComponent>\n      </div>\n    );\n  })\n);\nNotificationsDropdownMenu.displayName = 'NotificationsDropdownMenu';\n\nconst MENU_NAME = 'Notifications';\nconst Notifications = () => {\n  const dispatch = useDispatch();\n\n  const {\n    placementStatus: { view: placement },\n    behaviourStatus: { behaviourHtmlData },\n    attrMobile,\n    attrMenuAnimate,\n  } = useSelector((state) => state.menu);\n  const { color } = useSelector((state) => state.settings);\n  const { items } = useSelector((state) => state.notification);\n  const { showingNavMenu } = useSelector((state) => state.layout);\n\n  useEffect(() => {\n    dispatch(fetchNotifications());\n    return () => {};\n    // eslint-disable-next-line\n  }, []);\n\n  const onToggle = (status, event) => {\n    if (event && event.stopPropagation) event.stopPropagation();\n    else if (event && event.originalEvent && event.originalEvent.stopPropagation) event.originalEvent.stopPropagation();\n    dispatch(layoutShowingNavMenu(status ? MENU_NAME : ''));\n  };\n\n  useEffect(() => {\n    dispatch(layoutShowingNavMenu(''));\n    // eslint-disable-next-line\n  }, [attrMenuAnimate, behaviourHtmlData, attrMobile, color]);\n\n  if (items && items.length > 0) {\n    return (\n      <Dropdown\n        as=\"li\"\n        bsPrefix=\"list-inline-item\"\n        onToggle={onToggle}\n        show={showingNavMenu === MENU_NAME}\n        align={placement === MENU_PLACEMENT.Horizontal ? 'end' : 'start'}\n      >\n        <Dropdown.Toggle as={NotificationsDropdownToggle} />\n        <Dropdown.Menu\n          as={NotificationsDropdownMenu}\n          items={items}\n          popperConfig={{\n            modifiers: [\n              {\n                name: 'offset',\n                options: {\n                  offset: () => {\n                    if (placement === MENU_PLACEMENT.Horizontal) {\n                      return [0, 7];\n                    }\n                    if (window.innerWidth < 768) {\n                      return [-168, 7];\n                    }\n                    return [-162, 7];\n                  },\n                },\n              },\n            ],\n          }}\n        />\n      </Dropdown>\n    );\n  }\n  return <></>;\n};\nexport default React.memo(Notifications);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}