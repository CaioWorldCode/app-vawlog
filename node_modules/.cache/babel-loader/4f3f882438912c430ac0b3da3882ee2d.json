{"ast":null,"code":"import axios from \"axios\";\nimport { APP_URL } from \"config\";\nimport { API_URL } from \"config\";\nconst api = axios.create({\n  baseURL: API_URL\n});\nlet data = JSON.parse(localStorage.getItem('persist:admin-vawlog'));\ndata = JSON.parse(data.auth);\napi.interceptors.request.use(async config => {\n  if (data.currentUser.token) {\n    config.headers.Authorization = `Bearer ${data.currentUser.token}`;\n  }\n  return config;\n});\napi.interceptors.response.use(response => response, error => {\n  if (error.response.data.error === 'Unauthenticated.') {\n    window.location.href = `${APP_URL}/login`;\n  }\n});\nexport default api;","map":{"version":3,"names":["axios","APP_URL","API_URL","api","create","baseURL","data","JSON","parse","localStorage","getItem","auth","interceptors","request","use","config","currentUser","token","headers","Authorization","response","error","window","location","href"],"sources":["/Users/caio/Projects/Samples/app-vawlog/src/services/api.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { APP_URL } from \"config\";\r\nimport { API_URL } from \"config\";\r\n\r\nconst api = axios.create({\r\n    baseURL: API_URL\r\n})\r\n\r\n\r\nlet data = JSON.parse(localStorage.getItem('persist:admin-vawlog'))\r\ndata = JSON.parse(data.auth)\r\n\r\n\r\napi.interceptors.request.use(async config => {\r\n\r\n    if (data.currentUser.token) {\r\n        config.headers.Authorization = `Bearer ${data.currentUser.token}`\r\n    }\r\n\r\n    return config\r\n})\r\n\r\napi.interceptors.response.use(\r\n    response => response,\r\n    error => {\r\n        if (error.response.data.error === 'Unauthenticated.') {\r\n            window.location.href= `${APP_URL}/login`\r\n        }\r\n    })\r\n\r\nexport default api"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,QAAQ;AAChC,SAASC,OAAO,QAAQ,QAAQ;AAEhC,MAAMC,GAAG,GAAGH,KAAK,CAACI,MAAM,CAAC;EACrBC,OAAO,EAAEH;AACb,CAAC,CAAC;AAGF,IAAII,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,sBAAsB,CAAC,CAAC;AACnEJ,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACF,IAAI,CAACK,IAAI,CAAC;AAG5BR,GAAG,CAACS,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,MAAMC,MAAM,IAAI;EAEzC,IAAIT,IAAI,CAACU,WAAW,CAACC,KAAK,EAAE;IACxBF,MAAM,CAACG,OAAO,CAACC,aAAa,GAAI,UAASb,IAAI,CAACU,WAAW,CAACC,KAAM,EAAC;EACrE;EAEA,OAAOF,MAAM;AACjB,CAAC,CAAC;AAEFZ,GAAG,CAACS,YAAY,CAACQ,QAAQ,CAACN,GAAG,CACzBM,QAAQ,IAAIA,QAAQ,EACpBC,KAAK,IAAI;EACL,IAAIA,KAAK,CAACD,QAAQ,CAACd,IAAI,CAACe,KAAK,KAAK,kBAAkB,EAAE;IAClDC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAEvB,OAAQ,QAAO;EAC5C;AACJ,CAAC,CAAC;AAEN,eAAeE,GAAG"},"metadata":{},"sourceType":"module"}